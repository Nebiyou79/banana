{
  "info": {
    "_postman_id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
    "name": "Tender Platform - Complete Test Suite",
    "description": "Complete test suite for tender platform including authentication, tender creation, management, invitations, and file uploads",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "ðŸ  1. Server Health & Setup",
      "item": [
        {
          "name": "GET - Server Health Check",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Server is running\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response has correct structure\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property(\"status\", \"OK\");",
                  "    pm.expect(jsonData).to.have.property(\"uploadSystem\", \"hybrid\");",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/health",
              "host": ["{{baseUrl}}"],
              "path": ["api", "health"]
            }
          },
          "response": []
        },
        {
          "name": "GET - Test Endpoint",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/test",
              "host": ["{{baseUrl}}"],
              "path": ["api", "test"]
            }
          }
        },
        {
          "name": "GET - Uploads Health (Hybrid System)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/uploads/health",
              "host": ["{{baseUrl}}"],
              "path": ["uploads", "health"]
            }
          }
        }
      ]
    },
    {
      "name": "ðŸ” 2. Authentication Setup",
      "item": [
        {
          "name": "Set Variables",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "// Set test user emails",
                  "pm.environment.set(\"freelancerEmail\", \"test.freelancer@example.com\");",
                  "pm.environment.set(\"companyEmail\", \"test.company@example.com\");",
                  "pm.environment.set(\"organizationEmail\", \"test.organization@example.com\");",
                  "pm.environment.set(\"password\", \"Test123!\");",
                  "",
                  "// Set default test data",
                  "pm.environment.set(\"freelanceTenderId\", \"\");",
                  "pm.environment.set(\"professionalTenderId\", \"\");",
                  "pm.environment.set(\"inviteOnlyTenderId\", \"\");",
                  "pm.environment.set(\"attachmentFileName\", \"\");",
                  "pm.environment.set(\"invitationId\", \"\");"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/health",
              "host": ["{{baseUrl}}"],
              "path": ["api", "health"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "ðŸ‘¤ 3. Freelancer User Tests",
      "item": [
        {
          "name": "POST - Register Freelancer",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Freelancer registration successful\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test(\"Response contains auth token\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property(\"success\", true);",
                  "    pm.expect(jsonData.data).to.have.property(\"token\");",
                  "    ",
                  "    // Store the token for later use",
                  "    if (jsonData.data.token) {",
                  "        pm.environment.set(\"freelancerToken\", jsonData.data.token);",
                  "    }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Test Freelancer\",\n  \"email\": \"{{freelancerEmail}}\",\n  \"password\": \"{{password}}\",\n  \"role\": \"freelancer\",\n  \"phone\": \"+1234567890\",\n  \"country\": \"US\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/auth/register",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "auth", "register"]
            }
          },
          "response": []
        },
        {
          "name": "POST - Login Freelancer",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Freelancer login successful\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Token received and stored\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property(\"success\", true);",
                  "    pm.expect(jsonData.data).to.have.property(\"token\");",
                  "    ",
                  "    // Store token if not already set",
                  "    const token = jsonData.data.token;",
                  "    pm.environment.set(\"freelancerToken\", token);",
                  "    pm.expect(token).to.be.a(\"string\").and.to.not.be.empty;",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"{{freelancerEmail}}\",\n  \"password\": \"{{password}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/auth/login",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "auth", "login"]
            }
          },
          "response": []
        },
        {
          "name": "GET - Get Categories (Freelancer)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Categories fetched successfully\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Contains freelance categories\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property(\"success\", true);",
                  "    pm.expect(jsonData.data).to.have.property(\"freelance\");",
                  "    pm.expect(jsonData.data.freelance).to.have.property(\"technology_programming\");",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{freelancerToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/tender/categories?type=freelance",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "tender", "categories"],
              "query": [
                {
                  "key": "type",
                  "value": "freelance"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "GET - View All Tenders (Freelancer Perspective)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Tenders fetched successfully\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Only freelance tenders visible\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property(\"success\", true);",
                  "    pm.expect(jsonData).to.have.property(\"data\");",
                  "    ",
                  "    // Check all tenders are freelance (or empty array)",
                  "    if (jsonData.data.length > 0) {",
                  "        jsonData.data.forEach(tender => {",
                  "            pm.expect(tender.tenderCategory).to.equal(\"freelance\");",
                  "        });",
                  "    }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{freelancerToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/tender?status=active&tenderCategory=freelance",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "tender"],
              "query": [
                {
                  "key": "status",
                  "value": "active"
                },
                {
                  "key": "tenderCategory",
                  "value": "freelance"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "GET - View Single Tender (Freelancer)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Can view tender details\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Cannot view professional tenders\", function () {",
                  "    // This test expects 403 for professional tenders",
                  "    if (pm.response.code === 403) {",
                  "        const jsonData = pm.response.json();",
                  "        pm.expect(jsonData.message).to.include(\"Not authorized\");",
                  "    }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{freelancerToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/tender/{{professionalTenderId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "tender", "{{professionalTenderId}}"]
            }
          },
          "response": []
        },
        {
          "name": "POST - Try to Create Tender (Should Fail - Wrong Role)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Freelancer cannot create tenders\", function () {",
                  "    pm.response.to.have.status(403);",
                  "});",
                  "",
                  "pm.test(\"Error message indicates role restriction\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.message).to.include(\"not allowed\");",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{freelancerToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Test Freelance Tender\",\n  \"description\": \"This should fail due to role restriction\",\n  \"procurementCategory\": \"web_development\",\n  \"deadline\": \"2024-12-31T23:59:59.000Z\",\n  \"tenderCategory\": \"freelance\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/tender/freelance/create",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "tender", "freelance", "create"]
            }
          },
          "response": []
        },
        {
          "name": "POST - Toggle Save Tender",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{freelancerToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/tender/{{freelanceTenderId}}/toggle-save",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "tender", "{{freelanceTenderId}}", "toggle-save"]
            }
          },
          "response": []
        },
        {
          "name": "GET - Get Saved Tenders",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{freelancerToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/tender/user/saved",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "tender", "user", "saved"]
            }
          }
        }
      ]
    },
    {
      "name": "ðŸ¢ 4. Company User Tests",
      "item": [
        {
          "name": "POST - Register Company User",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Company registration successful\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test(\"Token received and stored\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property(\"success\", true);",
                  "    pm.expect(jsonData.data).to.have.property(\"token\");",
                  "    ",
                  "    const token = jsonData.data.token;",
                  "    pm.environment.set(\"companyToken\", token);",
                  "    pm.expect(token).to.be.a(\"string\").and.to.not.be.empty;",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Test Company\",\n  \"email\": \"{{companyEmail}}\",\n  \"password\": \"{{password}}\",\n  \"role\": \"company\",\n  \"phone\": \"+1234567891\",\n  \"country\": \"US\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/auth/register",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "auth", "register"]
            }
          },
          "response": []
        },
        {
          "name": "POST - Login Company User",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"{{companyEmail}}\",\n  \"password\": \"{{password}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/auth/login",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "auth", "login"]
            }
          },
          "response": []
        },
        {
          "name": "POST - Create Company Profile",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Company profile created\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test(\"Profile data returned\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property(\"success\", true);",
                  "    pm.expect(jsonData.data).to.have.property(\"company\");",
                  "    pm.expect(jsonData.data.company).to.have.property(\"name\", \"Test Company Inc.\");",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{companyToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Test Company Inc.\",\n  \"industry\": \"Technology\",\n  \"description\": \"A test company for tender platform\",\n  \"website\": \"https://testcompany.example.com\",\n  \"contactEmail\": \"contact@testcompany.example.com\",\n  \"phone\": \"+1234567890\",\n  \"address\": \"123 Test Street\",\n  \"city\": \"Test City\",\n  \"country\": \"US\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/company/profile",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "company", "profile"]
            }
          },
          "response": []
        },
        {
          "name": "GET - View Categories (Professional)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{companyToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/tender/categories?type=professional",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "tender", "categories"],
              "query": [
                {
                  "key": "type",
                  "value": "professional"
                }
              ]
            }
          }
        },
        {
          "name": "POST - Create Professional Tender (Draft)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Professional tender created as draft\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test(\"Tender ID stored\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property(\"success\", true);",
                  "    pm.expect(jsonData.data).to.have.property(\"tender\");",
                  "    ",
                  "    const tenderId = jsonData.data.tender._id || jsonData.data.tender.id;",
                  "    pm.environment.set(\"professionalTenderId\", tenderId);",
                  "    pm.expect(tenderId).to.be.a(\"string\").and.to.not.be.empty;",
                  "    ",
                  "    // Verify tender category",
                  "    pm.expect(jsonData.data.tender.tenderCategory).to.equal(\"professional\");",
                  "    pm.expect(jsonData.data.tender.status).to.equal(\"draft\");",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{companyToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Website Development Project\",\n  \"description\": \"Development of corporate website with CMS integration\",\n  \"procurementCategory\": \"software_development_pro\",\n  \"deadline\": \"2024-12-31T23:59:59.000Z\",\n  \"referenceNumber\": \"TENDER-PRO-001\",\n  \"procuringEntity\": \"Test Company Inc.\",\n  \"professionalSpecific\": {\n    \"referenceNumber\": \"TENDER-PRO-001\",\n    \"procuringEntity\": \"Test Company Inc.\",\n    \"procurementMethod\": \"open_tender\",\n    \"fundingSource\": \"Internal\",\n    \"minimumExperience\": 3,\n    \"evaluationMethod\": \"combined\",\n    \"evaluationCriteria\": {\n      \"technicalWeight\": 70,\n      \"financialWeight\": 30\n    },\n    \"bidValidityPeriod\": {\n      \"value\": 30,\n      \"unit\": \"days\"\n    },\n    \"cpoRequired\": false\n  },\n  \"skillsRequired\": [\"JavaScript\", \"React\", \"Node.js\", \"MongoDB\"],\n  \"visibilityType\": \"public\",\n  \"workflowType\": \"open\",\n  \"status\": \"draft\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/tender/professional/create",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "tender", "professional", "create"]
            }
          },
          "response": []
        },
        {
          "name": "POST - Create Invite-Only Professional Tender",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Invite-only tender created\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test(\"Invite-only tender ID stored\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property(\"success\", true);",
                  "    ",
                  "    const tenderId = jsonData.data.tender._id || jsonData.data.tender.id;",
                  "    pm.environment.set(\"inviteOnlyTenderId\", tenderId);",
                  "    pm.expect(tenderId).to.be.a(\"string\").and.to.not.be.empty;",
                  "    ",
                  "    // Verify visibility type",
                  "    pm.expect(jsonData.data.tender.visibility.visibilityType).to.equal(\"invite_only\");",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{companyToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Confidential Software Project\",\n  \"description\": \"Development of confidential internal software\",\n  \"procurementCategory\": \"software_development_pro\",\n  \"deadline\": \"2024-12-31T23:59:59.000Z\",\n  \"referenceNumber\": \"TENDER-INV-001\",\n  \"procuringEntity\": \"Test Company Inc.\",\n  \"professionalSpecific\": {\n    \"referenceNumber\": \"TENDER-INV-001\",\n    \"procuringEntity\": \"Test Company Inc.\",\n    \"procurementMethod\": \"restricted\",\n    \"fundingSource\": \"Confidential\",\n    \"minimumExperience\": 5,\n    \"evaluationMethod\": \"combined\",\n    \"cpoRequired\": true,\n    \"cpoDescription\": \"Certificate of financial capability required\"\n  },\n  \"skillsRequired\": [\"Java\", \"Spring Boot\", \"Microservices\", \"AWS\"],\n  \"visibilityType\": \"invite_only\",\n  \"workflowType\": \"open\",\n  \"status\": \"draft\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/tender/professional/create",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "tender", "professional", "create"]
            }
          },
          "response": []
        },
        {
          "name": "GET - View Owned Tenders",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{companyToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/tender/user/owned",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "tender", "user", "owned"]
            }
          }
        },
        {
          "name": "GET - Get Tender for Editing (Draft)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Can get draft tender for editing\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Contains editable data\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property(\"success\", true);",
                  "    pm.expect(jsonData.data).to.have.property(\"tender\");",
                  "    pm.expect(jsonData.data).to.have.property(\"canEdit\", true);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{companyToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/tender/{{professionalTenderId}}/edit-data",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "tender", "{{professionalTenderId}}", "edit-data"]
            }
          },
          "response": []
        },
        {
          "name": "PUT - Try to Update Professional Tender (Should Fail)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Professional tender cannot be updated\", function () {",
                  "    pm.response.to.have.status(403);",
                  "});",
                  "",
                  "pm.test(\"Error indicates professional tender restriction\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.message).to.include(\"Only draft freelance\");",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{companyToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Updated Title - Should Fail\",\n  \"description\": \"This update should fail for professional tender\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/tender/{{professionalTenderId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "tender", "{{professionalTenderId}}"]
            }
          },
          "response": []
        },
        {
          "name": "DELETE - Try to Delete Professional Tender (Should Fail)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Professional tender cannot be deleted\", function () {",
                  "    pm.response.to.have.status(403);",
                  "});",
                  "",
                  "pm.test(\"Error indicates deletion restriction\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.message).to.include(\"Only draft freelance\");",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{companyToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/tender/{{professionalTenderId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "tender", "{{professionalTenderId}}"]
            }
          },
          "response": []
        },
        {
          "name": "POST - Publish Tender",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Tender published successfully\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Tender status is published\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property(\"success\", true);",
                  "    pm.expect(jsonData).to.have.property(\"message\");",
                  "    pm.expect(jsonData.message).to.include(\"published\");",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{companyToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/tender/{{professionalTenderId}}/publish",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "tender", "{{professionalTenderId}}", "publish"]
            }
          },
          "response": []
        },
        {
          "name": "GET - Get Tender Statistics",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{companyToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/tender/{{professionalTenderId}}/stats",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "tender", "{{professionalTenderId}}", "stats"]
            }
          }
        },
        {
          "name": "GET - Get Companies List for Invitation",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Companies list fetched\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Contains verified companies\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property(\"success\", true);",
                  "    pm.expect(jsonData.data).to.have.property(\"companies\");",
                  "    pm.expect(jsonData.data.companies).to.be.an(\"array\");",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{companyToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/tender/companies/list",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "tender", "companies", "list"]
            }
          },
          "response": []
        },
        {
          "name": "GET - View Public Tenders (Company Perspective)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{companyToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/tender?status=active&tenderCategory=professional",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "tender"],
              "query": [
                {
                  "key": "status",
                  "value": "active"
                },
                {
                  "key": "tenderCategory",
                  "value": "professional"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "ðŸ›ï¸ 5. Organization User Tests",
      "item": [
        {
          "name": "POST - Register Organization User",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Organization registration successful\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test(\"Token received and stored\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property(\"success\", true);",
                  "    pm.expect(jsonData.data).to.have.property(\"token\");",
                  "    ",
                  "    const token = jsonData.data.token;",
                  "    pm.environment.set(\"organizationToken\", token);",
                  "    pm.expect(token).to.be.a(\"string\").and.to.not.be.empty;",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Test Organization\",\n  \"email\": \"{{organizationEmail}}\",\n  \"password\": \"{{password}}\",\n  \"role\": \"organization\",\n  \"phone\": \"+1234567892\",\n  \"country\": \"US\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/auth/register",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "auth", "register"]
            }
          },
          "response": []
        },
        {
          "name": "POST - Login Organization User",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"{{organizationEmail}}\",\n  \"password\": \"{{password}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/auth/login",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "auth", "login"]
            }
          },
          "response": []
        },
        {
          "name": "POST - Create Organization Profile",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Organization profile created\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{organizationToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Test Organization Ltd.\",\n  \"type\": \"government\",\n  \"description\": \"A test organization for tender platform\",\n  \"website\": \"https://testorg.example.com\",\n  \"contactEmail\": \"procurement@testorg.example.com\",\n  \"phone\": \"+1234567890\",\n  \"address\": \"456 Government Ave\",\n  \"city\": \"Capital City\",\n  \"country\": \"US\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/organization/profile",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "organization", "profile"]
            }
          },
          "response": []
        },
        {
          "name": "POST - Create Freelance Tender (Organization)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Organization can create freelance tender\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test(\"Freelance tender ID stored\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property(\"success\", true);",
                  "    ",
                  "    const tenderId = jsonData.data.tender._id || jsonData.data.tender.id;",
                  "    pm.environment.set(\"freelanceTenderId\", tenderId);",
                  "    pm.expect(tenderId).to.be.a(\"string\").and.to.not.be.empty;",
                  "    ",
                  "    // Verify tender category",
                  "    pm.expect(jsonData.data.tender.tenderCategory).to.equal(\"freelance\");",
                  "    pm.expect(jsonData.data.tender.ownerRole).to.equal(\"organization\");",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{organizationToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Graphic Design for Government Portal\",\n  \"description\": \"Design UI/UX for government citizen portal\",\n  \"procurementCategory\": \"ui_ux_design\",\n  \"deadline\": \"2024-12-31T23:59:59.000Z\",\n  \"freelanceSpecific\": {\n    \"engagementType\": \"fixed_price\",\n    \"projectType\": \"one_time\",\n    \"budget\": {\n      \"min\": 5000,\n      \"max\": 10000,\n      \"currency\": \"USD\"\n    },\n    \"estimatedDuration\": {\n      \"value\": 30,\n      \"unit\": \"days\"\n    },\n    \"experienceLevel\": \"expert\",\n    \"portfolioRequired\": true\n  },\n  \"skillsRequired\": [\"UI Design\", \"UX Research\", \"Figma\", \"Adobe XD\"],\n  \"workflowType\": \"open\",\n  \"status\": \"draft\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/tender/freelance/create",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "tender", "freelance", "create"]
            }
          },
          "response": []
        },
        {
          "name": "GET - Get Tender for Editing (Freelance Draft)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{organizationToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/tender/{{freelanceTenderId}}/edit-data",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "tender", "{{freelanceTenderId}}", "edit-data"]
            }
          }
        },
        {
          "name": "PUT - Update Freelance Tender (Should Work)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Freelance tender updated successfully\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Title was updated\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property(\"success\", true);",
                  "    pm.expect(jsonData.data.tender.title).to.include(\"Updated\");",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{organizationToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Updated: Graphic Design for Government Portal\",\n  \"description\": \"Updated description with more detailed requirements\",\n  \"skillsRequired\": [\"UI Design\", \"UX Research\", \"Figma\", \"Adobe XD\", \"Prototyping\"]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/tender/{{freelanceTenderId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "tender", "{{freelanceTenderId}}"]
            }
          },
          "response": []
        },
        {
          "name": "POST - Publish Freelance Tender",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{organizationToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/tender/{{freelanceTenderId}}/publish",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "tender", "{{freelanceTenderId}}", "publish"]
            }
          }
        },
        {
          "name": "DELETE - Delete Freelance Tender (Should Fail - Published)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Cannot delete published tender\", function () {",
                  "    // Can be 400 or 403 depending on implementation",
                  "    pm.expect(pm.response.code).to.be.oneOf([400, 403]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{organizationToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/tender/{{freelanceTenderId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "tender", "{{freelanceTenderId}}"]
            }
          },
          "response": []
        },
        {
          "name": "GET - View Invite-Only Tender (Should Fail - Not Invited)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Cannot view invite-only tender without invitation\", function () {",
                  "    pm.response.to.have.status(403);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{organizationToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/tender/{{inviteOnlyTenderId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "tender", "{{inviteOnlyTenderId}}"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "ðŸ“Ž 6. File Upload & Attachment Tests",
      "item": [
        {
          "name": "POST - Upload Document for Tender (Multipart)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Document uploaded successfully\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Attachment data returned\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property(\"success\", true);",
                  "    pm.expect(jsonData.data).to.have.property(\"attachments\");",
                  "    ",
                  "    if (jsonData.data.attachments && jsonData.data.attachments.length > 0) {",
                  "        const attachment = jsonData.data.attachments[0];",
                  "        pm.environment.set(\"attachmentFileName\", attachment.fileName);",
                  "        pm.expect(attachment).to.have.property(\"originalName\");",
                  "        pm.expect(attachment).to.have.property(\"url\");",
                  "        pm.expect(attachment).to.have.property(\"downloadUrl\");",
                  "    }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{companyToken}}"
              }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "attachments",
                  "type": "file",
                  "src": "/path/to/test-document.pdf"
                },
                {
                  "key": "descriptions",
                  "value": "Technical specifications document",
                  "type": "text"
                },
                {
                  "key": "types",
                  "value": "technical_specifications",
                  "type": "text"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/tender/{{professionalTenderId}}/attachments/upload",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "tender", "{{professionalTenderId}}", "attachments", "upload"]
            }
          },
          "response": []
        },
        {
          "name": "GET - Download Attachment",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{companyToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/tender/{{professionalTenderId}}/attachments/{{attachmentFileName}}/download",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "tender", "{{professionalTenderId}}", "attachments", "{{attachmentFileName}}", "download"]
            }
          }
        },
        {
          "name": "GET - Preview Attachment (PDF)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{companyToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/tender/{{professionalTenderId}}/attachments/{{attachmentFileName}}/preview",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "tender", "{{professionalTenderId}}", "attachments", "{{attachmentFileName}}", "preview"]
            }
          }
        },
        {
          "name": "DELETE - Delete Attachment",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Attachment deleted successfully\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{companyToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/tender/{{professionalTenderId}}/attachments/{{attachmentFileName}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "tender", "{{professionalTenderId}}", "attachments", "{{attachmentFileName}}"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "ðŸ“¨ 7. Invitation System Tests",
      "item": [
        {
          "name": "POST - Invite Companies to Tender",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Invitation sent successfully\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Stats returned\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property(\"success\", true);",
                  "    pm.expect(jsonData.data).to.have.property(\"stats\");",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{companyToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"emails\": [\"another.company@example.com\"],\n  \"companies\": []\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/tender/{{inviteOnlyTenderId}}/invite",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "tender", "{{inviteOnlyTenderId}}", "invite"]
            }
          },
          "response": []
        },
        {
          "name": "GET - Get My Invitations (Company)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Invitations fetched\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response contains tenders array\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property(\"success\", true);",
                  "    pm.expect(jsonData.data).to.have.property(\"tenders\");",
                  "    pm.expect(jsonData.data.tenders).to.be.an(\"array\");",
                  "    ",
                  "    // Store invitation ID if available",
                  "    if (jsonData.data.tenders.length > 0 && jsonData.data.tenders[0].userInvitation) {",
                  "        pm.environment.set(\"invitationId\", jsonData.data.tenders[0].userInvitation._id);",
                  "    }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{companyToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/tender/invitations/my",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "tender", "invitations", "my"]
            }
          },
          "response": []
        },
        {
          "name": "POST - Respond to Invitation (Accept)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Invitation response accepted\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response data returned\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property(\"success\", true);",
                  "    pm.expect(jsonData.message).to.include(\"accepted\");",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{companyToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"accepted\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/tender/{{inviteOnlyTenderId}}/invitations/{{invitationId}}/respond",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "tender", "{{inviteOnlyTenderId}}", "invitations", "{{invitationId}}", "respond"]
            }
          },
          "response": []
        },
        {
          "name": "GET - View Invite-Only Tender After Acceptance",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Can view invite-only tender after acceptance\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{companyToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/tender/{{inviteOnlyTenderId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "tender", "{{inviteOnlyTenderId}}"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "ðŸ“Š 8. Advanced Tender Tests",
      "item": [
        {
          "name": "POST - Create Closed Workflow Tender",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Closed workflow tender created\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test(\"Workflow type is closed\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data.tender.workflowType).to.equal(\"closed\");",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{companyToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Sealed Bid Construction Project\",\n  \"description\": \"Government building construction - sealed bids only\",\n  \"procurementCategory\": \"construction_building\",\n  \"deadline\": \"2024-12-31T23:59:59.000Z\",\n  \"referenceNumber\": \"TENDER-CLOSED-001\",\n  \"procuringEntity\": \"Government Department\",\n  \"professionalSpecific\": {\n    \"referenceNumber\": \"TENDER-CLOSED-001\",\n    \"procuringEntity\": \"Government Department\",\n    \"procurementMethod\": \"open_tender\",\n    \"sealedBidConfirmation\": true\n  },\n  \"skillsRequired\": [\"Construction\", \"Civil Engineering\", \"Project Management\"],\n  \"visibilityType\": \"public\",\n  \"workflowType\": \"closed\",\n  \"status\": \"draft\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/tender/professional/create",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "tender", "professional", "create"]
            }
          },
          "response": []
        },
        {
          "name": "GET - Get Owner Tender Details",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{companyToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/tender/owner/{{professionalTenderId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "tender", "owner", "{{professionalTenderId}}"]
            }
          }
        },
        {
          "name": "GET - Get Category Label",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/tender/categories/label/web_development?type=freelance",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "tender", "categories", "label", "web_development"],
              "query": [
                {
                  "key": "type",
                  "value": "freelance"
                }
              ]
            }
          }
        },
        {
          "name": "GET - Search Tenders",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{freelancerToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/tender?search=website&skills=JavaScript,React",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "tender"],
              "query": [
                {
                  "key": "search",
                  "value": "website"
                },
                {
                  "key": "skills",
                  "value": "JavaScript,React"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "ðŸ§ª 9. Error & Edge Case Tests",
      "item": [
        {
          "name": "POST - Create Tender with Missing Required Fields",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Missing fields error\", function () {",
                  "    pm.response.to.have.status(400);",
                  "});",
                  "",
                  "pm.test(\"Error message indicates missing fields\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property(\"missingFields\");",
                  "    pm.expect(jsonData.missingFields).to.be.an(\"array\");",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{companyToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Incomplete Tender\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/tender/professional/create",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "tender", "professional", "create"]
            }
          },
          "response": []
        },
        {
          "name": "GET - View Non-Existent Tender",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Non-existent tender returns 404\", function () {",
                  "    pm.response.to.have.status(404);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{freelancerToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/tender/000000000000000000000000",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "tender", "000000000000000000000000"]
            }
          },
          "response": []
        },
        {
          "name": "PUT - Update Tender Without Ownership",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Unauthorized update returns 403\", function () {",
                  "    pm.response.to.have.status(403);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{freelancerToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Unauthorized Update\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/tender/{{professionalTenderId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "tender", "{{professionalTenderId}}"]
            }
          },
          "response": []
        },
        {
          "name": "POST - Invite to Non-Invite-Only Tender",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Cannot invite to non-invite-only tender\", function () {",
                  "    pm.response.to.have.status(400);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{companyToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"emails\": [\"test@example.com\"]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/tender/{{professionalTenderId}}/invite",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "tender", "{{professionalTenderId}}", "invite"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "ðŸ“‹ 10. Cleanup Tests",
      "item": [
        {
          "name": "DELETE - Create and Delete Draft Freelance Tender",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "// Create a draft freelance tender first",
                  "const createRequest = {",
                  "    url: pm.environment.get(\"baseUrl\") + '/api/v1/tender/freelance/create',",
                  "    method: 'POST',",
                  "    header: {",
                  "        'Authorization': 'Bearer ' + pm.environment.get(\"organizationToken\"),",
                  "        'Content-Type': 'application/json'",
                  "    },",
                  "    body: {",
                  "        mode: 'raw',",
                  "        raw: JSON.stringify({",
                  "            title: 'Temporary Test Tender for Deletion',",
                  "            description: 'This tender will be deleted',",
                  "            procurementCategory: 'web_development',",
                  "            deadline: '2024-12-31T23:59:59.000Z',",
                  "            freelanceSpecific: {",
                  "                engagementType: 'fixed_price',",
                  "                budget: { min: 1000, max: 5000, currency: 'USD' }",
                  "            },",
                  "            status: 'draft'",
                  "        })",
                  "    }",
                  "};",
                  "",
                  "pm.sendRequest(createRequest, function (err, response) {",
                  "    if (!err && response.code === 201) {",
                  "        const tenderId = response.json().data.tender._id || response.json().data.tender.id;",
                  "        pm.environment.set(\"tempTenderId\", tenderId);",
                  "        console.log('Created temporary tender:', tenderId);",
                  "    }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{organizationToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/tender/{{tempTenderId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "tender", "{{tempTenderId}}"]
            }
          },
          "response": []
        },
        {
          "name": "GET - Verify Tender Deleted",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{organizationToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/tender/{{tempTenderId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "tender", "{{tempTenderId}}"]
            }
          }
        }
      ]
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "exec": [
          "// Set base URL based on environment",
          "if (!pm.environment.get(\"baseUrl\")) {",
          "    pm.environment.set(\"baseUrl\", \"http://localhost:4000\");",
          "}"
        ],
        "type": "text/javascript"
      }
    }
  ],
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:4000"
    },
    {
      "key": "freelancerToken",
      "value": ""
    },
    {
      "key": "companyToken",
      "value": ""
    },
    {
      "key": "organizationToken",
      "value": ""
    },
    {
      "key": "freelanceTenderId",
      "value": ""
    },
    {
      "key": "professionalTenderId",
      "value": ""
    },
    {
      "key": "inviteOnlyTenderId",
      "value": ""
    },
    {
      "key": "attachmentFileName",
      "value": ""
    },
    {
      "key": "invitationId",
      "value": ""
    },
    {
      "key": "tempTenderId",
      "value": ""
    }
  ],
  "auth": null
}